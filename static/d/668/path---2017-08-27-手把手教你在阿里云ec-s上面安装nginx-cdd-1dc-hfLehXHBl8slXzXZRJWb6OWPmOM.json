{"data":{"site":{"siteMetadata":{"title":"进击的前端","author":"ricosmall"}},"markdownRemark":{"id":"8ab084e3-d6d1-5121-aa7a-329fcb3a3396","excerpt":"一直想给自己弄一个云服务器和自己的域名，现在抓住了机会。阿里云有 免费和非常实惠的新手大礼包 。如果你也想体验一下，可以试试，我当时申请的就是 这种 。 我选择的系统配置是Linux Ubuntu 14.04，如果你不是选的Linux，不用再往下看了。 nginx配置步骤…","html":"<p>一直想给自己弄一个云服务器和自己的域名，现在抓住了机会。阿里云有<a href=\"https://www.aliyun.com/activity#/\">免费和非常实惠的新手大礼包</a>。如果你也想体验一下，可以试试，我当时申请的就是<a href=\"https://free.aliyun.com/?type=personal\">这种</a>。</p>\n<!-- more -->\n<p>我选择的系统配置是Linux Ubuntu 14.04，如果你不是选的Linux，不用再往下看了。</p>\n<h2>nginx配置步骤</h2>\n<h3>1.下载</h3>\n<ol>\n<li>\n<p>nginx源文件：<a href=\"http://nginx.org/en/download.html\">传送门</a></p>\n</li>\n<li>\n<p>openssl源文件：<a href=\"https://www.openssl.org/source/\">传送门</a></p>\n</li>\n<li>\n<p>pcre源文件：<a href=\"https://ftp.pcre.org/pub/pcre/\">传送门</a></p>\n</li>\n<li>\n<p>zlib源文件：<a href=\"https://zlib.net/\">传送门</a></p>\n</li>\n</ol>\n<h3>2.将下载的源文件放到ECS上去</h3>\n<p>我是通过sftp的方式将文件放上去的</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># sftp模式登陆到服务器</span>\n<span class=\"token function\">sftp</span> name@ip\n\n<span class=\"token comment\"># cd到你想放置临时文件的目录</span>\nsftp<span class=\"token operator\">></span> <span class=\"token function\">cd</span> /tmp\n\n<span class=\"token comment\"># cd到你本机下载文件的位置</span>\nsftp<span class=\"token operator\">></span> lcd ~/Download\n\n<span class=\"token comment\"># 上传文件</span>\nsftp<span class=\"token operator\">></span> put nginx.tar.gz openssl.tar.gz pcre.tar.gz zlib.tar.gz</code></pre></div>\n<h3>3.登陆到服务器进行配置、安装、测试</h3>\n<p>我使用ssh的方式</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ssh登陆服务器</span>\n<span class=\"token function\">ssh</span> name@ip\n\n<span class=\"token comment\"># cd到刚才上传文件的目录</span>\n<span class=\"token function\">cd</span> /tmp\n\n<span class=\"token comment\"># 解压文件</span>\n<span class=\"token function\">tar</span> -xzf filename\n\n<span class=\"token comment\"># 进入nginx源码目录做小小的修改，为了安全</span>\n<span class=\"token function\">cd</span> ./nginx/src/core\nvim nginx.h</code></pre></div>\n<p>源文件内容如下</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token comment\">/*\n * Copyright (C) Igor Sysoev\n * Copyright (C) Nginx, Inc.\n */</span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifndef</span> _NGINX_H_INCLUDED_</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> _NGINX_H_INCLUDED_</span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> nginx_version      1013004</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VERSION      \"1.13.4\"</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VER          \"nginx/\" NGINX_VERSION</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> NGX_BUILD</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VER_BUILD    NGINX_VER \" (\" NGX_BUILD \")\"</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VER_BUILD    NGINX_VER</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VAR          \"NGINX\"</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGX_OLDPID_EXT     \".oldbin\"</span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span> </span><span class=\"token comment\">/* _NGINX_H_INCLUDED_ */</span></code></pre></div>\n<p>更改之后的文件内容如下</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token comment\">/*\n * Copyright (C) Igor Sysoev\n * Copyright (C) Nginx, Inc.\n */</span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifndef</span> _NGINX_H_INCLUDED_</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> _NGINX_H_INCLUDED_</span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> nginx_version      1013004</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VERSION      \"\"</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VER          \"super\" NGINX_VERSION</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifdef</span> NGX_BUILD</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VER_BUILD    NGINX_VER \" (\" NGX_BUILD \")\"</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">else</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VER_BUILD    NGINX_VER</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGINX_VAR          \"super\"</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> NGX_OLDPID_EXT     \".oldbin\"</span>\n\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span> </span><span class=\"token comment\">/* _NGINX_H_INCLUDED_ */</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># cd到nginx目录，从core目录操作</span>\n<span class=\"token function\">cd</span> <span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/\n\n<span class=\"token comment\"># configure</span>\n./configure  --prefix<span class=\"token operator\">=</span>/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-openssl<span class=\"token operator\">=</span>/tmp/openssl --with-pcre<span class=\"token operator\">=</span>/tmp/pcre --with-zlib<span class=\"token operator\">=</span>/tmp/zlib\n\n<span class=\"token comment\"># /usr/local/nginx 指的是最终编译安装到此路径</span>\n<span class=\"token comment\"># /tmp/openssl, /tmp/pcre, /tmp/zlib 对应解压源码文件夹位置</span>\n\n<span class=\"token comment\"># install</span>\n<span class=\"token function\">make</span> <span class=\"token function\">install</span>\n\n<span class=\"token comment\"># 安装完之后到安装目录下去</span>\n<span class=\"token function\">cd</span> /usr/local/nginx\n\n<span class=\"token comment\"># 检查一下是否安装配置成功</span>\n<span class=\"token function\">cd</span> ./sbin\n./nginx -t\n\n<span class=\"token comment\"># 正常输出如下</span>\nnginx: the configuration <span class=\"token function\">file</span> /usr/local/nginx/conf/nginx.conf syntax is ok\nnginx: configuration <span class=\"token function\">file</span> /usr/local/nginx/conf/nginx.conf <span class=\"token function\">test</span> is successful\n\n<span class=\"token comment\"># 如果看到如下结果，尝试重启一下</span>\nThe program <span class=\"token string\">'nginx'</span> can be found <span class=\"token keyword\">in</span> the following packages:\n * nginx-core\n * nginx-extras\n * nginx-full\n * nginx-light\n * nginx-naxsi\nTry: <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token operator\">&lt;</span>selected package<span class=\"token operator\">></span></code></pre></div>\n<p>至此，已经成功安装好了nginx。</p>\n<p>有人会问为什么不通过<code class=\"language-text\">apt-get install nginx</code>之类的命令来安装，我想说的是，那种方式就无法体验最新版的nginx了。</p>","frontmatter":{"title":"手把手教你在阿里云ECS上面安装nginx","date":"August 27, 2017"}}},"pageContext":{"slug":"/2017-08-27-手把手教你在阿里云ECS上面安装nginx/","previous":{"fields":{"slug":"/2017-08-02-JavaScript跨域方法总结/"},"frontmatter":{"title":"JavaScript跨域方法总结"}},"next":{"fields":{"slug":"/2017-08-28-手把手教你在阿里云ECS上配置HTTPS/"},"frontmatter":{"title":"手把手教你在阿里云ECS上配置HTTPS"}}}}