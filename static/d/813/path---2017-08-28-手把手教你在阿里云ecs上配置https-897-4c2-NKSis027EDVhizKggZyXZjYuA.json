{"data":{"site":{"siteMetadata":{"title":"进击的前端","author":"ricosmall"}},"markdownRemark":{"id":"0d32193f-bca2-563e-bf3f-95d01c7aada3","excerpt":"上HTTPS的理由不用多说，直接上教程。 1.申请SSL证书 免费申请阿里云SSL证书： 传送门 按照阿里云的提示操作填写相关的信息、配置好自己的域名等信息。附上截图教程： 传送门 2.配置nginx 由初始的nginx我没有备份，这里就只附上最后配置完的代码吧：","html":"<p>上HTTPS的理由不用多说，直接上教程。</p>\n<!-- more -->\n<h3>1.申请SSL证书</h3>\n<p>免费申请阿里云SSL证书：<a href=\"https://common-buy.aliyun.com/?commodityCode=cas#/buy\">传送门</a></p>\n<p>按照阿里云的提示操作填写相关的信息、配置好自己的域名等信息。附上截图教程：<a href=\"https://bbs.aliyun.com/read/298246.html\">传送门</a></p>\n<h3>2.配置nginx</h3>\n<p>由初始的nginx我没有备份，这里就只附上最后配置完的代码吧：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#user  nobody;</span>\nworker_processes  1<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">#error_log  logs/error.log;</span>\n<span class=\"token comment\">#error_log  logs/error.log  notice;</span>\n<span class=\"token comment\">#error_log  logs/error.log  info;</span>\n\n<span class=\"token comment\">#pid        logs/nginx.pid;</span>\n\n\nevents <span class=\"token punctuation\">{</span>\n    worker_connections  1024<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\nhttp <span class=\"token punctuation\">{</span>\n    include       mime.types<span class=\"token punctuation\">;</span>\n    default_type  application/octet-stream<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">#log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '</span>\n    <span class=\"token comment\">#                  '$status $body_bytes_sent \"$http_referer\" '</span>\n    <span class=\"token comment\">#                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';</span>\n\n    <span class=\"token comment\">#access_log  logs/access.log  main;</span>\n\n    sendfile        on<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">#tcp_nopush     on;</span>\n\n    <span class=\"token comment\">#keepalive_timeout  0;</span>\n    keepalive_timeout  65<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">#gzip  on;</span>\n\n    server <span class=\"token punctuation\">{</span>\n        listen       80<span class=\"token punctuation\">;</span>\n\t    server_name  xxx.com<span class=\"token punctuation\">;</span>\n\t    add_header Strict-Transport-Security max-age<span class=\"token operator\">=</span>15768000<span class=\"token punctuation\">;</span>\n\t    <span class=\"token keyword\">return</span> 301 https://ricosmall.cn<span class=\"token variable\">$request_uri</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">#charset koi8-r;</span>\n\n        <span class=\"token comment\">#access_log  logs/host.access.log  main;</span>\n\n        <span class=\"token comment\">#location / {</span>\n        <span class=\"token comment\">#    root   html;</span>\n        <span class=\"token comment\">#    index  index.html index.htm;</span>\n        <span class=\"token comment\">#}</span>\n\n        <span class=\"token comment\">#error_page  404              /404.html;</span>\n\n        <span class=\"token comment\"># redirect server error pages to the static page /50x.html</span>\n        <span class=\"token comment\">#</span>\n        <span class=\"token comment\">#error_page   500 502 503 504  /50x.html;</span>\n        <span class=\"token comment\">#location = /50x.html {</span>\n        <span class=\"token comment\">#    root   html;</span>\n        <span class=\"token comment\">#}</span>\n\n        <span class=\"token comment\"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span>\n        <span class=\"token comment\">#</span>\n        <span class=\"token comment\">#location ~ \\.php$ {</span>\n        <span class=\"token comment\">#    proxy_pass   http://127.0.0.1;</span>\n        <span class=\"token comment\">#}</span>\n\n        <span class=\"token comment\"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>\n        <span class=\"token comment\">#</span>\n        <span class=\"token comment\">#location ~ \\.php$ {</span>\n        <span class=\"token comment\">#    root           html;</span>\n        <span class=\"token comment\">#    fastcgi_pass   127.0.0.1:9000;</span>\n        <span class=\"token comment\">#    fastcgi_index  index.php;</span>\n        <span class=\"token comment\">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span>\n        <span class=\"token comment\">#    include        fastcgi_params;</span>\n        <span class=\"token comment\">#}</span>\n\n        <span class=\"token comment\"># deny access to .htaccess files, if Apache's document root</span>\n        <span class=\"token comment\"># concurs with nginx's one</span>\n        <span class=\"token comment\">#</span>\n        <span class=\"token comment\">#location ~ /\\.ht {</span>\n        <span class=\"token comment\">#    deny  all;</span>\n        <span class=\"token comment\">#}</span>\n    <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token comment\"># another virtual host using mix of IP-, name-, and port-based configuration</span>\n    <span class=\"token comment\">#</span>\n    <span class=\"token comment\">#server {</span>\n    <span class=\"token comment\">#    listen       8000;</span>\n    <span class=\"token comment\">#    listen       somename:8080;</span>\n    <span class=\"token comment\">#    server_name  somename  alias  another.alias;</span>\n\n    <span class=\"token comment\">#    location / {</span>\n    <span class=\"token comment\">#        root   html;</span>\n    <span class=\"token comment\">#        index  index.html index.htm;</span>\n    <span class=\"token comment\">#    }</span>\n    <span class=\"token comment\">#}</span>\n\n\n    <span class=\"token comment\"># HTTPS server</span>\n    <span class=\"token comment\">#</span>\n    server <span class=\"token punctuation\">{</span>\n    \tlisten      443 ssl http2 default_server<span class=\"token punctuation\">;</span>\n    \tserver_name xxx.com<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 你的域名</span>\n    \tadd_header  Strict-Transport-Security max-age<span class=\"token operator\">=</span>15768000<span class=\"token punctuation\">;</span>\n\n    \tssl_certificate     path/to/xxx.pem<span class=\"token punctuation\">;</span> <span class=\"token comment\"># pem文件位置</span>\n    \tssl_certificate_key path/to/xxx.key<span class=\"token punctuation\">;</span> <span class=\"token comment\"># 私钥位置</span>\n\n    \tssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class=\"token punctuation\">;</span>\n\n    \tssl_ciphers               <span class=\"token string\">'ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!CAMELLIA:!DES:!MD5:!PSK:!RC4'</span><span class=\"token punctuation\">;</span>\n    \tssl_prefer_server_ciphers on<span class=\"token punctuation\">;</span>\n\n        ssl_session_cache    shared:SSL:20m<span class=\"token punctuation\">;</span>\n        ssl_session_timeout  60m<span class=\"token punctuation\">;</span>\n\n        location / <span class=\"token punctuation\">{</span>\n            root   html<span class=\"token punctuation\">;</span>\n            index  index.html index.htm<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"手把手教你在阿里云ECS上配置HTTPS","date":"August 28, 2017"}}},"pageContext":{"slug":"/2017-08-28-手把手教你在阿里云ECS上配置HTTPS/","previous":{"fields":{"slug":"/2017-08-27-手把手教你在阿里云ECS上面安装nginx/"},"frontmatter":{"title":"手把手教你在阿里云ECS上面安装nginx"}},"next":{"fields":{"slug":"/2017-09-29-前端框架引入的意义/"},"frontmatter":{"title":"前端框架引入的意义"}}}}